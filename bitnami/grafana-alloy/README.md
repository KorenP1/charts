# Bitnami package for Grafana Alloy

Grafana Alloy combines the strengths of the leading collectors into one place. Whether observing applications, infrastructure, or both, Grafana Alloy can collect, process, and export telemetry signals to scale and future-proof your observability approach.

[Overview of Grafana Alloy](https://grafana.com/docs/alloy/latest/)

Trademarks: This software listing is packaged by Bitnami. The respective trademarks mentioned in the offering are owned by the respective companies, and use of them does not imply any affiliation or endorsement.

## TL;DR

```console
helm install my-release oci://registry-1.docker.io/bitnamicharts/grafana-alloy
```
## Parameters

### Global parameters

| Name                                                  | Description                                                                                                                                                                                                                                                                                                                                                         | Value  |
| ----------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------ |
| `global.imageRegistry`                                | Global Docker image registry                                                                                                                                                                                                                                                                                                                                        | `""`   |
| `global.imagePullSecrets`                             | Global Docker registry secret names as an array                                                                                                                                                                                                                                                                                                                     | `[]`   |
| `global.compatibility.openshift.adaptSecurityContext` | Adapt the securityContext sections of the deployment to make them compatible with Openshift restricted-v2 SCC: remove runAsUser, runAsGroup and fsGroup and let the platform use their allowed default IDs. Possible values: auto (apply if the detected running cluster is Openshift), force (perform the adaptation always), disabled (do not perform adaptation) | `auto` |

### Common parameters

| Name                | Description                                                                             | Value |
| ------------------- | --------------------------------------------------------------------------------------- | ----- |
| `extraDeploy`       | Array of extra objects to deploy with the release                                       | `[]`  |
| `nameOverride`      | String to partially override grafana.fullname template (will maintain the release name) | `""`  |
| `fullnameOverride`  | String to fully override grafana.fullname template                                      | `""`  |
| `namespaceOverride` | String to fully override common.names.namespace                                         | `""`  |
| `commonLabels`      | Labels to add to all deployed objects                                                   | `{}`  |
| `commonAnnotations` | Annotations to add to all deployed objects                                              | `{}`  |

### Grafana Alloy parameters

| Name                                                | Description                                                                                                                                                                                                       | Value                                                                                                |
| --------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------- |
| `image.registry`                                    | Grafana image registry                                                                                                                                                                                            | `REGISTRY_NAME`                                                                                      |
| `image.repository`                                  | Grafana image repository                                                                                                                                                                                          | `REPOSITORY_NAME/grafana`                                                                            |
| `image.digest`                                      | Grafana image digest in the way sha256:aa.... Please note this parameter, if set, will override the tag                                                                                                           | `""`                                                                                                 |
| `image.pullPolicy`                                  | Grafana image pull policy                                                                                                                                                                                         | `IfNotPresent`                                                                                       |
| `image.pullSecrets`                                 | Grafana image pull secrets                                                                                                                                                                                        | `[]`                                                                                                 |
| `configuration`                                     | Grafana Alloy Configuration                                                                                                                                                                                       | `logging {
  level  = "debug"
  format = "logfmt"
}
`                                                |
| `existingConfigMap`                                 | Already existing config.alloy configMap name                                                                                                                                                                      | `""`                                                                                                 |
| `configMapKey`                                      | Key for the config.alloy configuration in the configMap                                                                                                                                                           | `config.alloy`                                                                                       |
| `replicaCount`                                      | Number of pod replicas to deploy                                                                                                                                                                                  | `1`                                                                                                  |
| `podManagementPolicy`                               | StatefulSet controller supports relax its ordering guarantees while preserving its uniqueness and identity guarantees. There are two valid pod management policies: OrderedReady and Parallel                     | `Parallel`                                                                                           |
| `updateStrategy.type`                               | statefulset strategy type                                                                                                                                                                                         | `RollingUpdate`                                                                                      |
| `minReadySeconds`                                   | How many seconds a pod needs to be ready before killing the next, during update                                                                                                                                   | `0`                                                                                                  |
| `podLabels`                                         | Extra labels for statefulset pods                                                                                                                                                                                 | `{}`                                                                                                 |
| `podAnnotations`                                    | Extra annotations for statefulset pods                                                                                                                                                                            | `{}`                                                                                                 |
| `automountServiceAccountToken`                      | Mount Service Account token in pod                                                                                                                                                                                | `true`                                                                                               |
| `hostAliases`                                       | statefulset pods host aliases                                                                                                                                                                                     | `[]`                                                                                                 |
| `hostNetwork`                                       | Specify if host network should be enabled for statefulset pods                                                                                                                                                    | `false`                                                                                              |
| `hostIPC`                                           | Specify if host IPC should be enabled for statefulset pods                                                                                                                                                        | `false`                                                                                              |
| `schedulerName`                                     | Name of the k8s scheduler (other than default)                                                                                                                                                                    | `""`                                                                                                 |
| `topologyKey`                                       | Override common lib default topology key. If empty - "kubernetes.io/hostname" is used                                                                                                                             | `""`                                                                                                 |
| `podAffinityPreset`                                 | Pod affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                                               | `""`                                                                                                 |
| `podAntiAffinityPreset`                             | Pod anti-affinity preset. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                                          | `soft`                                                                                               |
| `nodeAffinityPreset.type`                           | Node affinity preset type. Ignored if `affinity` is set. Allowed values: `soft` or `hard`                                                                                                                         | `""`                                                                                                 |
| `nodeAffinityPreset.key`                            | Node label key to match Ignored if `affinity` is set.                                                                                                                                                             | `""`                                                                                                 |
| `nodeAffinityPreset.values`                         | Node label values to match. Ignored if `affinity` is set.                                                                                                                                                         | `[]`                                                                                                 |
| `affinity`                                          | Affinity for pod assignment                                                                                                                                                                                       | `{}`                                                                                                 |
| `nodeSelector`                                      | Node labels for pod assignment                                                                                                                                                                                    | `{}`                                                                                                 |
| `tolerations`                                       | Tolerations for pod assignment                                                                                                                                                                                    | `[]`                                                                                                 |
| `topologySpreadConstraints`                         | Topology Spread Constraints for pod assignment spread across your cluster among failure-domains. Evaluated as a template                                                                                          | `[]`                                                                                                 |
| `terminationGracePeriodSeconds`                     | Seconds the pod needs to gracefully terminate                                                                                                                                                                     | `""`                                                                                                 |
| `priorityClassName`                                 | Name of the existing priority class to be used by statefulset pods                                                                                                                                                | `""`                                                                                                 |
| `runtimeClassName`                                  | Name of the runtime class to be used by pod(s)                                                                                                                                                                    | `""`                                                                                                 |
| `enableServiceLinks`                                | Whether information about services should be injected into pod's environment variable                                                                                                                             | `true`                                                                                               |
| `dnsPolicy`                                         | Specifies the DNS policy for the statefulset pods                                                                                                                                                                 | `""`                                                                                                 |
| `dnsConfig`                                         | allows users more control on the DNS settings for a Pod. Required if `dnsPolicy` is set to `None`                                                                                                                 | `{}`                                                                                                 |
| `podSecurityContext.enabled`                        | Enable security context for the pods                                                                                                                                                                              | `true`                                                                                               |
| `podSecurityContext.fsGroupChangePolicy`            | Set filesystem group change policy                                                                                                                                                                                | `Always`                                                                                             |
| `podSecurityContext.sysctls`                        | Set kernel settings using the sysctl interface                                                                                                                                                                    | `[]`                                                                                                 |
| `podSecurityContext.supplementalGroups`             | Set filesystem extra groups                                                                                                                                                                                       | `[]`                                                                                                 |
| `podSecurityContext.fsGroup`                        | Set statefulset pod's Security Context fsGroup                                                                                                                                                                    | `1001`                                                                                               |
| `serviceAccount.create`                             | Enable creation of ServiceAccount for statefulset pods                                                                                                                                                            | `true`                                                                                               |
| `serviceAccount.name`                               | The name of the service account to use. If not set and `create` is `true`, a name is generated                                                                                                                    | `""`                                                                                                 |
| `serviceAccount.automountServiceAccountToken`       | Allows auto mount of ServiceAccountToken on the serviceAccount created                                                                                                                                            | `null`                                                                                               |
| `serviceAccount.annotations`                        | Additional custom annotations for the ServiceAccount                                                                                                                                                              | `{}`                                                                                                 |
| `containerSecurityContext.enabled`                  | Enabled containers' Security Context                                                                                                                                                                              | `true`                                                                                               |
| `containerSecurityContext.seLinuxOptions`           | Set SELinux options in container                                                                                                                                                                                  | `{}`                                                                                                 |
| `containerSecurityContext.runAsUser`                | Set containers' Security Context runAsUser                                                                                                                                                                        | `1001`                                                                                               |
| `containerSecurityContext.runAsGroup`               | Set containers' Security Context runAsGroup                                                                                                                                                                       | `1001`                                                                                               |
| `containerSecurityContext.runAsNonRoot`             | Set container's Security Context runAsNonRoot                                                                                                                                                                     | `true`                                                                                               |
| `containerSecurityContext.privileged`               | Set container's Security Context privileged                                                                                                                                                                       | `false`                                                                                              |
| `containerSecurityContext.readOnlyRootFilesystem`   | Set container's Security Context readOnlyRootFilesystem                                                                                                                                                           | `true`                                                                                               |
| `containerSecurityContext.allowPrivilegeEscalation` | Set container's Security Context allowPrivilegeEscalation                                                                                                                                                         | `false`                                                                                              |
| `containerSecurityContext.capabilities.drop`        | List of capabilities to be dropped                                                                                                                                                                                | `["ALL"]`                                                                                            |
| `containerSecurityContext.seccompProfile.type`      | Set container's Security Context seccomp profile                                                                                                                                                                  | `RuntimeDefault`                                                                                     |
| `command`                                           | Override main container command                                                                                                                                                                                   | `[]`                                                                                                 |
| `args`                                              | Override main container arguments                                                                                                                                                                                 | `["run","/opt/bitnami/grafana-alloy/config.alloy","--storage.path=/opt/bitnami/grafana-alloy/data"]` |
| `extraEnvVars`                                      | Extra environment variables to add to main container                                                                                                                                                              | `[]`                                                                                                 |
| `extraVolumes`                                      | Optionally specify extra list of additional volumes for the statefulset pod(s)                                                                                                                                    | `[]`                                                                                                 |
| `extraContainerPorts`                               | for the main container.                                                                                                                                                                                           | `[]`                                                                                                 |
| `livenessProbe.enabled`                             | Enable livenessProbe on main containers                                                                                                                                                                           | `true`                                                                                               |
| `livenessProbe.initialDelaySeconds`                 | Initial delay seconds for livenessProbe                                                                                                                                                                           | `10`                                                                                                 |
| `livenessProbe.periodSeconds`                       | Period seconds for livenessProbe                                                                                                                                                                                  | `10`                                                                                                 |
| `livenessProbe.timeoutSeconds`                      | Timeout seconds for livenessProbe                                                                                                                                                                                 | `5`                                                                                                  |
| `livenessProbe.failureThreshold`                    | Failure threshold for livenessProbe                                                                                                                                                                               | `3`                                                                                                  |
| `livenessProbe.successThreshold`                    | Success threshold for livenessProbe                                                                                                                                                                               | `1`                                                                                                  |
| `readinessProbe.enabled`                            | Enable readinessProbe on main containers                                                                                                                                                                          | `true`                                                                                               |
| `readinessProbe.initialDelaySeconds`                | Initial delay seconds for readinessProbe                                                                                                                                                                          | `5`                                                                                                  |
| `readinessProbe.periodSeconds`                      | Period seconds for readinessProbe                                                                                                                                                                                 | `10`                                                                                                 |
| `readinessProbe.timeoutSeconds`                     | Timeout seconds for readinessProbe                                                                                                                                                                                | `5`                                                                                                  |
| `readinessProbe.failureThreshold`                   | Failure threshold for readinessProbe                                                                                                                                                                              | `6`                                                                                                  |
| `readinessProbe.successThreshold`                   | Success threshold for readinessProbe                                                                                                                                                                              | `1`                                                                                                  |
| `startupProbe.enabled`                              | Enable startupProbe on main containers                                                                                                                                                                            | `false`                                                                                              |
| `startupProbe.initialDelaySeconds`                  | Initial delay seconds for startupProbe                                                                                                                                                                            | `30`                                                                                                 |
| `startupProbe.periodSeconds`                        | Period seconds for startupProbe                                                                                                                                                                                   | `10`                                                                                                 |
| `startupProbe.timeoutSeconds`                       | Timeout seconds for startupProbe                                                                                                                                                                                  | `1`                                                                                                  |
| `startupProbe.failureThreshold`                     | Failure threshold for startupProbe                                                                                                                                                                                | `15`                                                                                                 |
| `startupProbe.successThreshold`                     | Success threshold for startupProbe                                                                                                                                                                                | `1`                                                                                                  |
| `customLivenessProbe`                               | Custom livenessProbe that overrides the default one                                                                                                                                                               | `{}`                                                                                                 |
| `customReadinessProbe`                              | Custom readinessProbe that overrides the default one                                                                                                                                                              | `{}`                                                                                                 |
| `customStartupProbe`                                | Custom startupProbe that overrides the default one                                                                                                                                                                | `{}`                                                                                                 |
| `lifecycleHooks`                                    | lifecycleHooks for the main container for automations or terminating validation                                                                                                                                   | `{}`                                                                                                 |
| `resourcesPreset`                                   | Set container resources according to one common preset (allowed values: none, nano, micro, small, medium, large, xlarge, 2xlarge). This is ignored if resources is set (resources is recommended for production). | `small`                                                                                              |
| `resources`                                         | Set container requests and limits for different resources like CPU or memory (essential for production workloads)                                                                                                 | `{}`                                                                                                 |
| `extraVolumeMounts`                                 | Optionally specify extra list of additional volumeMounts for the main container(s)                                                                                                                                | `[]`                                                                                                 |
| `rbac.create`                                       | Whether to create & use RBAC resources or not                                                                                                                                                                     | `false`                                                                                              |
| `rbac.rules`                                        | Define permitted rules for the role                                                                                                                                                                               | `[]`                                                                                                 |
| `service.type`                                      | Kubernetes Service type                                                                                                                                                                                           | `ClusterIP`                                                                                          |
| `service.extraPorts`                                | Extra ports to expose in the service                                                                                                                                                                              | `[]`                                                                                                 |
| `service.sessionAffinity`                           | Control where client requests go, to the same pod or round-robin                                                                                                                                                  | `None`                                                                                               |
| `service.sessionAffinityConfig`                     | Additional settings for the sessionAffinity                                                                                                                                                                       | `{}`                                                                                                 |
| `service.clusterIP`                                 | service Cluster IP                                                                                                                                                                                                | `""`                                                                                                 |
| `service.loadBalancerIP`                            | service Load Balancer IP                                                                                                                                                                                          | `""`                                                                                                 |
| `service.loadBalancerClass`                         | service Load Balancer Class                                                                                                                                                                                       | `""`                                                                                                 |
| `service.loadBalancerSourceRanges`                  | service Load Balancer sources                                                                                                                                                                                     | `[]`                                                                                                 |
| `service.allocateLoadBalancerNodePorts`             | Whether to allocate node ports when service type is LoadBalancer                                                                                                                                                  | `true`                                                                                               |
| `service.externalTrafficPolicy`                     | service external traffic policy                                                                                                                                                                                   | `Cluster`                                                                                            |
| `service.annotations`                               | Additional custom annotations for the service                                                                                                                                                                     | `{}`                                                                                                 |
